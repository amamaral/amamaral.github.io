<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <title> Noise in some electronic circuits </title>

    <!-- Bootstrap core CSS -->
    <link href="/css/bootstrap.css" rel="stylesheet">

    <!-- Add custom CSS here -->
    <link href="/css/modern-business.css" rel="stylesheet">
    <link href="/font-awesome/css/font-awesome.min.css" rel="stylesheet">
    <link href="/academicons/css/academicons.css" rel="stylesheet">
</head>

<body>

    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- You'll want to use a responsive image option so this logo looks good on devices - I recommend using something like retina.js (do a quick Google search for it and you'll find it) -->
                <a class="navbar-brand" href="/index.html"> Anderson M. Amaral</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse navbar-ex1-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="/about.html">Personal Info</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-flask pull-left"></i> Science<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="/science_papers.html">Papers</a>
                            </li>
                            <li><a href="/conference_papers.html">Conference papers</a>
                            </li>
                            <li><a href="/under_construction.html" data-toggle="tooltip" title="Under construction">Oral talks</a>
                            </li>
                            <li><a href="/under_construction.html" data-toggle="tooltip" title="Under construction">Science links</a>
                            </li>
                        </ul>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-gears"></i> Technical work<b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            <li><a href="/blog.html" data-toggle="tooltip" title="Technical articles in my blog">Articles</a>
                            </li>
                            <li><a href="http://www.github.com/amamaral" data-toggle="tooltip" title="Github software repositories">Software</a>
                            </li>
                            <li><a href="/under_construction.html" data-toggle="tooltip" title="Under construction">Programming links</a>
                            </li>
                            <li><a href="/under_construction.html" data-toggle="tooltip" title="Under construction">Electronics links</a>
                            </li>
                        </ul>
                    </li>
		    <li><a href="/teaching.html"><i class="fa fa-book"></i> Teaching (Ensino)</a>
		    </li>
                    <li><a href="/blog.html" data-toggle="tooltip" title="Educational and technical blog">Blog</a>
                    </li>
		    <li><a href="/useful.html"><i class="fa fa-user"></i></a>
                    </li>
                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

    

<style type="text/css">
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    span.underline{text-decoration: underline;}
    div.column{display: inline-block; vertical-align: top; width: 50%;}
</style>
<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; position: absolute; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
{ position: relative; }
pre.numberSource a.sourceLine:empty
{ position: absolute; }
pre.numberSource a.sourceLine::before
{ content: attr(data-line-number);
  position: absolute; left: -5em; text-align: right; vertical-align: baseline;
  border: none; pointer-events: all;
  -webkit-touch-callout: none; -webkit-user-select: none;
  -khtml-user-select: none; -moz-user-select: none;
  -ms-user-select: none; user-select: none;
  padding: 0 4px; width: 4em;
  color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
{ background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

    <div class="container">

        <div class="row">

            <div class="col-lg-12">
                <ol class="breadcrumb">
                    <li><a href="/index.html">Home</a></li>
                    <li><a href="/blog.html">Blog</a></li>
                    <li>Noise in some electronic circuits</li>
                </ol>
            </div>

        </div>

        <div class="row">

            <div class="col-lg-8">

                <!-- the actual blog post: title/author/date/content -->
                <h2 class="page-header"> Noise in some electronic circuits </h2><i class="fa fa-clock-o"></i> Posted on 01/09/2019
                
                <hr>
                <h1 id="introduction">Introduction</h1>
<p>Noise is an intrinsic feature of any real world application. Not everything works as we would like in the ideal world, and some of these problems are intrinsic from nature and cannot be avoided whatsoever. Below we will consider some sources of noise and how to identify them. Since the focus here is on electronic noise, we will start with thermal noise in resistors (Johnson-Nyquist noise). Later we will consider the shot noise in photodiodes, which are an important feature in several optical detection systems.</p>
<h1 id="thermal-noise-in-resistors">Thermal noise in resistors</h1>
<p>Above 0 Kelvin the conduction electrons have some motion due to the thermal energy. How to consider this? Let’s consider a simple circuit composed of two identical resistors <span class="math inline">\(R_1\)</span> and <span class="math inline">\(R_2\)</span> as in the circuit (a) below. It’s assumed that both conductors are in thermal equilibrium at a temperature <span class="math inline">\(T\)</span>. We consider that the thermal motion of the electrons in <span class="math inline">\(R_1\)</span> produce some voltage noise <span class="math inline">\(v_n\)</span> and induce some current <span class="math inline">\(i_n\)</span> in the circuit. Our task is to relate the thermal motion with the circuit parameters. We will follow a reasoning similar to that developed by Nyquist<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<figure>
<img class="img-responsive" src="assets\johnson_noise_equiv_circuits.svg" alt="" /><figcaption>Thermal current in a resistor</figcaption>
</figure>
<p>It’s easy to verify from circuit (b) that <span class="math inline">\(v_n = (R_1 + R_2) i_n\)</span>. Since <span class="math inline">\(i_n\)</span> is the current across the circuit, Ohm’s law states that the voltage drop across <span class="math inline">\(R_2\)</span> is <span class="math inline">\(v_2 = R_2 i_n = \frac{R_2}{R_1 + R_2} v_n\)</span> and therefore in terms of <span class="math inline">\(v_n\)</span> the power dissipated at <span class="math inline">\(R_2\)</span> is <span class="math inline">\(P_2=v_2 i_n = \frac{R_2}{(R_1+R_2)^2} v_n^2.\)</span> Now consider the particular case where <span class="math inline">\(R_1 = R_2 = R\)</span>, the power dissipated by the resistor <span class="math inline">\(R_2\)</span> alone is <span class="math display">\[P_2=\frac{v_n^2(t)}{4R},\]</span> as if the thermally induced electron motion effectively sees the circuit shown in (c).</p>
<p>The symmetry between <span class="math inline">\(R_1\)</span> and <span class="math inline">\(R_2\)</span> when <span class="math inline">\(R_1=R_2=R\)</span> and the thermal equilibrium between both resistors requires that the power given by <span class="math inline">\(R_1\)</span> and absorbed by <span class="math inline">\(R_2\)</span> must be exactly the same as the power given by <span class="math inline">\(R_2\)</span> and absorbed by <span class="math inline">\(R_1\)</span>. Let’s consider the voltage noise, <span class="math inline">\(v_n\)</span>, as depicted in (a). In classical statistical mechanics the equipartition theorem states that there is <span class="math inline">\(kT/2\)</span> of thermal energy for each degree of freedom of a system. <span class="math inline">\(k\)</span> is Boltzmann constant and <span class="math inline">\(T\)</span> is the temperature. Since both the electric and the magnetic fields induced in the circuit can store energy<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>, we can state that there is an average energy of <span class="math inline">\(kT\)</span> in each degree of freedom. How many degrees of freedom our system has? It is possible to consider that <span class="math inline">\(v_n\)</span> has several allowed frequencies and each frequency mode has <span class="math inline">\(kT\)</span> energy on average. An arbitrary <span class="math inline">\(v_n\)</span> can be expressed through the following Fourier expansion <span class="math display">\[
v_n(t) = \int_0^\infty \tilde{v}_n(\omega) e^{j \omega t} d\omega + c.c.,
\]</span> where c.c. indicates the complex conjugate of the first term. Also, <span class="math inline">\(\tilde{v}_n(0)=0\)</span>, since the constant current term must be zero. The average electric power per unit time due to the thermal motion can be expressed as <span class="math display">\[
\left&lt;P\right&gt; = \left&lt; \frac{v_n^2(t)}{4R} \right&gt; = \int_0^\infty \frac{1}{4R} |\tilde{v}_n(f)|^2 df,
\]</span> where Parseval’s theorem can be used to obtain the last equality.</p>
<p>As previously stated, each mode at a frequency <span class="math inline">\(f\)</span> is an independent degree of freedom of the system, such that the equipartition theorem states that each mode has an energy density of <span class="math inline">\(kT\)</span>. Therefore, the thermal power within a frequency band <span class="math inline">\(df\)</span> is <span class="math inline">\(kT \,df\)</span>, or <span class="math display">\[
|\tilde{v}_n(f)|^2 df = 4 k T R df.
\]</span></p>
<p>The resistor thermal noise current <span class="math inline">\(i_n = v_n/R\)</span> and can be obtained from the thermal noise voltage. Then <span class="math display">\[
|\tilde{i}_n(f)|^2 df = \frac{4 k T}{R} df.
\]</span></p>
<p>Since the square of the RMS current and voltage can be found after the integration of either <span class="math inline">\(|\tilde{i}_n(f)|^2 df\)</span> or <span class="math inline">\(|\tilde{v}_n(f)|^2 df\)</span> over the signal frequency range <span class="math inline">\(\Delta f\)</span>, and the terms in the RHS of the above expressions are independent of frequency, it is possible to state that the RMS current and voltage due to the noise must satisfy <span class="math inline">\(i_{n,RMS}=\sqrt{\frac{4kT}{R}\Delta f}\)</span> and <span class="math inline">\(v_{n,RMS}=\sqrt{4kTR \Delta f}\)</span>. Which values are typical for these quantities? <span class="math inline">\(k=1.38\cdot10^{-23}\)</span> <span class="math inline">\(J/K\)</span> while at room temperature, <span class="math inline">\(T=300\)</span> K, such that <span class="math inline">\(4kT\approx 0.1\)</span> <span class="math inline">\(eV\)</span>. Therefore, a <span class="math inline">\(1\)</span> k resistor in a circuit whose bandwidth is <span class="math inline">\(\Delta f=10\)</span> kHz has an RMS voltage noise of 400 nV, and a current noise of 400 pA.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1"></a>k <span class="op">=</span> <span class="fl">1.380649E-23</span>  <span class="co"># Boltzmann constant</span></span>
<span id="cb1-2"><a href="#cb1-2"></a>T <span class="op">=</span> <span class="dv">300</span>           <span class="co"># Temperature in Kelvin</span></span>
<span id="cb1-3"><a href="#cb1-3"></a>R <span class="op">=</span> <span class="fl">1E3</span>           <span class="co"># Resistor value</span></span>
<span id="cb1-4"><a href="#cb1-4"></a>BW <span class="op">=</span> <span class="fl">10E3</span>         <span class="co"># Signal bandwidth</span></span>
<span id="cb1-5"><a href="#cb1-5"></a></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="bu">print</span>(<span class="st">&#39;vn:&#39;</span>, sqrt(<span class="dv">4</span> <span class="op">*</span> k <span class="op">*</span> T <span class="op">*</span> R <span class="op">*</span> BW))</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="bu">print</span>(<span class="st">&#39;in:&#39;</span>, sqrt(<span class="dv">4</span> <span class="op">*</span> k <span class="op">*</span> T<span class="op">/</span>R <span class="op">*</span> BW))</span></code></pre></div>
<pre><code>vn: 4.070354775692163e-07
in: 4.070354775692163e-10</code></pre>
<p>This noise is intrinsic to a condutor at a given temperature, and is not a mistake that can be avoided. Notice that the voltage noise increases with temperature, bandwidth and resistance, while the current noise decreases for larger resistances. If we want to see this effect in action, we now know which parameters must be tuned. Suppose that the ambient temperature remains, but the resistor value is increased to <span class="math inline">\(100\)</span> k. Then the voltage noise increases to <span class="math inline">\(4\,\mu\)</span>V and the current noise decreases to <span class="math inline">\(40\)</span> pA. While this voltage may still seem very small, it can affect significantly the performance of high-gain voltage amplifier stages. If a total voltage gain of 1000 is applied, this noise source alone may corresponds to a significant fraction of the signal. In particular, if we consider an oscilloscope whose input resistance is <span class="math inline">\(5\)</span> M<span class="math inline">\(\Omega\)</span> and whose detection bandwidth is <span class="math inline">\(20\)</span> MHz, then <span class="math inline">\(v_{n,RMS}=1\)</span> mV and this noise can be often seen directly on screen.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1"></a>k <span class="op">=</span> <span class="fl">1.380649E-23</span>  <span class="co"># Boltzmann constant</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>T <span class="op">=</span> <span class="dv">300</span>           <span class="co"># Temperature in Kelvin</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>R <span class="op">=</span> <span class="fl">100E3</span>         <span class="co"># Resistor value</span></span>
<span id="cb3-4"><a href="#cb3-4"></a>BW <span class="op">=</span> <span class="fl">100E3</span>        <span class="co"># Signal bandwidth</span></span>
<span id="cb3-5"><a href="#cb3-5"></a></span>
<span id="cb3-6"><a href="#cb3-6"></a><span class="bu">print</span>(<span class="st">&#39;vn:&#39;</span>, sqrt(<span class="dv">4</span> <span class="op">*</span> k <span class="op">*</span> T <span class="op">*</span> R <span class="op">*</span> BW))</span>
<span id="cb3-7"><a href="#cb3-7"></a><span class="bu">print</span>(<span class="st">&#39;in:&#39;</span>, sqrt(<span class="dv">4</span> <span class="op">*</span> k <span class="op">*</span> T<span class="op">/</span>R <span class="op">*</span> BW))</span></code></pre></div>
<pre><code>vn: 1.2871591976131003e-05
in: 1.2871591976131002e-10</code></pre>
<h2 id="circuit-design">Circuit design</h2>
<p>Let’s put these numbers together to design a circuit that is able make this noise measurable when using a 1 k resistor and a 300 kHz detection bandwidth. We want to measure the voltage noise, or <span class="math inline">\(v_{n,RMS}=2\,\mu\)</span>V. To observe such a small voltage in a typical oscilloscope it is necessary to apply a voltage gain of <span class="math inline">\(10^4\)</span> or more. We also must be sure that other sources of noise are smaller than our noise of interest. In datasheets it is often stated the noise per bandwidth unit (noise density), which in our case would be <span class="math inline">\(v_n = 4\,nV/\sqrt{Hz}\)</span>. For example, if we want to use a jellybean opamp as the TL071 or the LF411, their typical input voltage noise density is <span class="math inline">\(v_n = 18\,nV/\sqrt{Hz}\)</span>, which in principle would limit our measurements to resistors of 20k and up. As a side note, we remark that the opamp LT1024 used in Eur. J. Phys. 31 (2010) 675–679 has a typical input noise voltage of 14 <span class="math inline">\(nV/\sqrt{Hz}\)</span>, and they reported satisfactory measurements with <span class="math inline">\(R\)</span> values as low as 2k. Therefore even though low resistor could pose a problem, we could try to use simple op-amps. Let us consider the upper resistor value as 1M, where the voltage noise becomes <span class="math inline">\(v_{n,RMS}=70\,\mu\)</span>V and <span class="math inline">\(v_n = 130\,nV/\sqrt{Hz}\)</span>. While in the upper limit it seems that measurements should be easier, we must be careful with the bandwidth: the 3dB frequency with an effective 1 pF capacitor already spoils the bandwidth. An effective capacitance of 5 pF does not significantly attenuate the signal for a 100 k resistor, but then the range of <span class="math inline">\(R\)</span> values available for experimenting becomes smaller.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1"></a>k <span class="op">=</span> <span class="fl">1.380649E-23</span>  <span class="co"># Boltzmann constant</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>T <span class="op">=</span> <span class="dv">300</span>           <span class="co"># Temperature in Kelvin</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>R <span class="op">=</span> <span class="fl">1E3</span>           <span class="co"># Resistor value</span></span>
<span id="cb5-4"><a href="#cb5-4"></a>BW <span class="op">=</span> <span class="fl">200E3</span>        <span class="co"># Signal bandwidth</span></span>
<span id="cb5-5"><a href="#cb5-5"></a></span>
<span id="cb5-6"><a href="#cb5-6"></a><span class="bu">print</span>(<span class="st">&#39;vn:&#39;</span>, sqrt(<span class="dv">4</span> <span class="op">*</span> k <span class="op">*</span> T <span class="op">*</span> R <span class="op">*</span> BW))</span>
<span id="cb5-7"><a href="#cb5-7"></a><span class="bu">print</span>(<span class="st">&#39;vn/sqrt(Hz):&#39;</span>, sqrt(<span class="dv">4</span> <span class="op">*</span> k <span class="op">*</span> T <span class="op">*</span> R))</span>
<span id="cb5-8"><a href="#cb5-8"></a><span class="bu">print</span>(<span class="st">&#39;c_in(max):&#39;</span>, <span class="dv">1</span><span class="op">/</span>(<span class="dv">2</span><span class="op">*</span>pi<span class="op">*</span>R<span class="op">*</span>BW))</span>
<span id="cb5-9"><a href="#cb5-9"></a><span class="bu">print</span>(<span class="st">&#39;in:&#39;</span>, sqrt(<span class="dv">4</span> <span class="op">*</span> k <span class="op">*</span> T<span class="op">/</span>R <span class="op">*</span> BW))</span></code></pre></div>
<pre><code>vn: 1.820317994197717e-06
vn/sqrt(Hz): 4.070354775692163e-09
c_in(max): 7.957747154594768e-10
in: 1.820317994197717e-09</code></pre>
<p>We have however to be slightly more careful in our analysis. This is because the amplification stage input has some input capacitance. Therefore, the voltage at the non-inverting op amp input is <span class="math display">\[v_{in} = \frac{1}{1+j \omega R C_{input}} v_n.\]</span> Also, we have to consider the detailed behavior of the op amp, since it’s amplification at high frequencies will be limited by the op amp response. We will consider in particular that the op amp bandwidth has a single pole response, such that the open loop gain can be expressed as <span class="math inline">\(A/(1+j \omega/\omega_0)\)</span>. However, instead of using <span class="math inline">\(\omega_0\)</span>, it is more interesting to express the open loop gain in terms of the unity gain bandwidth product frequency, <span class="math inline">\(\omega_{GBP}\)</span>, where <span class="math inline">\(\vert A/(1+j \omega_{GBP}/\omega_0) \vert = 1\)</span>. <span class="math inline">\(\omega_{GBP}\gg \omega_0\)</span>, such that <span class="math inline">\(\omega_0\approx \omega_{GBP}/A\)</span>, and the op amp open loop gain can be expressed as <span class="math inline">\(A/(1+j A \omega /\omega_{GBP})\)</span>. Since <span class="math inline">\(A\)</span> is large, the op amp action over the inputs can be represented as <span class="math display">\[V_{out} = \frac{A}{1+j A \omega /\omega_{GBP}} (v_+ - v_-) \approx j \frac{\omega_{GBP}}{\omega} (v_+ - v_-).\]</span></p>
<p>Stating that <span class="math inline">\(v_- = v_+ - j \frac{\omega}{\omega{GBP}} V_{out}\)</span> in the op amp’s response for a non-inverting amplifier whose gain for an ideal op amp is <span class="math inline">\(G\)</span>, it can be seen that <span class="math display">\[V_{out} = \frac{G}{1 + j \frac{\omega}{\omega_{GBP}} G} v_{in}.\]</span> In other words, an increased gain reduces the bandwidth. Instead of setting all of the gain in a single stage and limit the circuit’s bandwidth, which is deleterious for the present experiment, we may consider <span class="math inline">\(n\)</span> identical amplification stages in sequence, such the total response is <span class="math display">\[V_{out} = g(\omega) v_{in} = \left(\frac{G}{1 + j \frac{\omega}{\omega_{GBP}} G}\right)^n v_{in}.\]</span></p>
<p>Below we consider the bandwidth of a non-inverting amplifier where <span class="math inline">\(\omega_{GBP}=3\)</span> MHz. The resistors are <span class="math inline">\(1\)</span>k and <span class="math inline">\(9.1\)</span>k. We add a capacitor <span class="math inline">\(C=100\)</span> n to reduce the DC gain to 1. The total response of 4 amplifier stages in sequence can be described by the plot below. Notice that the amplification bandwidth is approximately 240 kHz.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1"></a><span class="co"># %%</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>R1 <span class="op">=</span> <span class="fl">9.1e3</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>R2 <span class="op">=</span> <span class="fl">1e3</span></span>
<span id="cb7-4"><a href="#cb7-4"></a>C <span class="op">=</span> <span class="fl">100e-9</span></span>
<span id="cb7-5"><a href="#cb7-5"></a>GBP <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>pi<span class="op">*</span><span class="fl">3e6</span></span>
<span id="cb7-6"><a href="#cb7-6"></a>n<span class="op">=</span><span class="dv">4</span></span>
<span id="cb7-7"><a href="#cb7-7"></a></span>
<span id="cb7-8"><a href="#cb7-8"></a>f <span class="op">=</span> logspace(log10(<span class="dv">10</span>),log10(<span class="fl">1e7</span>), <span class="dv">150</span>)</span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co">#f = linspace(0, 1e7, 100000)</span></span>
<span id="cb7-10"><a href="#cb7-10"></a>omega <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>pi<span class="op">*</span>f</span>
<span id="cb7-11"><a href="#cb7-11"></a></span>
<span id="cb7-12"><a href="#cb7-12"></a>G <span class="op">=</span> (<span class="dv">1</span> <span class="op">+</span> 1j <span class="op">*</span> omega <span class="op">*</span> (R1 <span class="op">+</span> R2) <span class="op">*</span> C)<span class="op">/</span>(<span class="dv">1</span> <span class="op">+</span> 1j <span class="op">*</span> omega <span class="op">*</span> R2 <span class="op">*</span> C)</span>
<span id="cb7-13"><a href="#cb7-13"></a>single_stage_response <span class="op">=</span> G<span class="op">/</span>(<span class="dv">1</span><span class="op">+</span>1j <span class="op">*</span> (omega <span class="op">/</span> GBP) <span class="op">*</span> G)</span>
<span id="cb7-14"><a href="#cb7-14"></a>full_response <span class="op">=</span> <span class="bu">abs</span>(single_stage_response<span class="op">**</span>n)</span>
<span id="cb7-15"><a href="#cb7-15"></a></span>
<span id="cb7-16"><a href="#cb7-16"></a><span class="cf">if</span> <span class="dv">0</span>: <span class="co">#Evaluate bandwidth? Considering a brick-wall response</span></span>
<span id="cb7-17"><a href="#cb7-17"></a>  df <span class="op">=</span> f[<span class="dv">1</span>]<span class="op">-</span> f[<span class="dv">0</span>]</span>
<span id="cb7-18"><a href="#cb7-18"></a>  effBW <span class="op">=</span> <span class="bu">sum</span>(full_response <span class="op">*</span> df) <span class="op">/</span> <span class="dv">10</span><span class="op">**</span>n</span>
<span id="cb7-19"><a href="#cb7-19"></a>  <span class="bu">print</span>(<span class="st">&quot;Effective bandwidth = &quot;</span>, effBW<span class="op">/</span><span class="fl">1e3</span>,<span class="st">&quot; kHz&quot;</span>)</span>
<span id="cb7-20"><a href="#cb7-20"></a></span>
<span id="cb7-21"><a href="#cb7-21"></a>loglog(f, full_response)</span>
<span id="cb7-22"><a href="#cb7-22"></a><span class="co">#loglog(f, rad2deg(unwrap(angle(single_stage_response**4))))</span></span>
<span id="cb7-23"><a href="#cb7-23"></a>xlabel(<span class="st">&#39;Frequency (Hz)&#39;</span>)</span>
<span id="cb7-24"><a href="#cb7-24"></a>ylabel(<span class="st">&#39;Total gain&#39;</span>)</span>
<span id="cb7-25"><a href="#cb7-25"></a>ylim(<span class="fl">0.9</span>, <span class="dv">12000</span>)</span>
<span id="cb7-26"><a href="#cb7-26"></a>grid()</span>
<span id="cb7-27"><a href="#cb7-27"></a>savefig(<span class="st">&quot;assets/johnson_noise_opamp_response_design.png&quot;</span>)</span>
<span id="cb7-28"><a href="#cb7-28"></a><span class="co"># %%</span></span></code></pre></div>
<p><img class="img-responsive" src="assets/johnson_noise_opamp_response_design.png" /></p>
<p>Therefore, to relate the output RMS voltage with the resistor’s Johnson noise voltage, it is necessary to consider the total amplifier gain in terms of frequency, <span class="math inline">\(g(\omega)\)</span>. It must be later characterized experimentally, but for now we will include it in the model. Remembering that the op amp input has a capacitance <span class="math inline">\(C_{input}\)</span>, the voltage measured for a resistor <span class="math inline">\(R\)</span> is <span class="math display">\[V_{meas} = \frac{g(\omega)}{1 + j \omega R C_{input} } v_n.\]</span></p>
<p>Since we don’t know <span class="math inline">\(v_n\)</span>, only <span class="math inline">\(\vert v_n \vert^2\)</span>, we can consider the voltage variance from <span class="math display">\[\left&lt;v^2\right&gt; = \int_0^\infty |\tilde{V}_{meas}(f)|^2 df = 4 k T R \int_0^\infty \frac{\vert g(2\pi f)\vert^2}{1 + (2\pi f R C_{input})^2 } df\]</span></p>
<p>Notice that the voltage variance must grow linearly with the resistor temperature. Also, as long as <span class="math inline">\(1/2\pi RC_{input}\)</span> is much larger than the frequencies within the amplifier bandwidth, <span class="math inline">\(\left&lt;v^2\right&gt;\)</span> is proportional to <span class="math inline">\(R\)</span> and <span class="math inline">\(k\)</span>. Notice therefore that a determination of the amplifier response and the resistor’s resistance and temperature allows to determine Boltzmann constant. In particular, let’s consider below the expected response for some resistors. The notice how the op amp input capacitance limits the maximum voltage and how does it reduces the measured noise at large resistor values. However, this value can be determined by measuring the voltage fluctuations due to the thermal motion in M<span class="math inline">\(\Omega\)</span> resistors. In terms of linearity, the measured behavior becomes very close to the ideal response when <span class="math inline">\(R&lt;100\)</span> k<span class="math inline">\(\Omega\)</span>. While this simplifies the fitting, the signal amplitude is significantly reduced.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1"></a><span class="co"># %%</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>R1 <span class="op">=</span> <span class="fl">9.1e3</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>R2 <span class="op">=</span> <span class="fl">1e3</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>C <span class="op">=</span> <span class="fl">100e-9</span></span>
<span id="cb8-5"><a href="#cb8-5"></a>GBP <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>pi<span class="op">*</span><span class="fl">3e6</span></span>
<span id="cb8-6"><a href="#cb8-6"></a>n<span class="op">=</span><span class="dv">4</span></span>
<span id="cb8-7"><a href="#cb8-7"></a>k <span class="op">=</span> <span class="fl">1.380649E-23</span>  <span class="co"># Boltzmann constant</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>T <span class="op">=</span> <span class="dv">300</span>           <span class="co"># Temperature in Kelvin</span></span>
<span id="cb8-9"><a href="#cb8-9"></a></span>
<span id="cb8-10"><a href="#cb8-10"></a>f <span class="op">=</span> linspace(<span class="dv">0</span>, <span class="fl">3e6</span>, <span class="dv">30000</span>)</span>
<span id="cb8-11"><a href="#cb8-11"></a>df <span class="op">=</span> f[<span class="dv">1</span>] <span class="op">-</span> f[<span class="dv">0</span>]</span>
<span id="cb8-12"><a href="#cb8-12"></a>omega <span class="op">=</span> <span class="dv">2</span><span class="op">*</span>pi<span class="op">*</span>f</span>
<span id="cb8-13"><a href="#cb8-13"></a></span>
<span id="cb8-14"><a href="#cb8-14"></a>G <span class="op">=</span> (<span class="dv">1</span> <span class="op">+</span> 1j <span class="op">*</span> omega <span class="op">*</span> (R1 <span class="op">+</span> R2) <span class="op">*</span> C)<span class="op">/</span>(<span class="dv">1</span> <span class="op">+</span> 1j <span class="op">*</span> omega <span class="op">*</span> R2 <span class="op">*</span> C)</span>
<span id="cb8-15"><a href="#cb8-15"></a>g <span class="op">=</span> (G<span class="op">/</span>(<span class="dv">1</span><span class="op">+</span>1j <span class="op">*</span> (omega <span class="op">/</span> GBP) <span class="op">*</span> G))<span class="op">**</span>n</span>
<span id="cb8-16"><a href="#cb8-16"></a></span>
<span id="cb8-17"><a href="#cb8-17"></a>plt.rcParams[<span class="st">&quot;figure.figsize&quot;</span>] <span class="op">=</span> (<span class="dv">8</span>,<span class="dv">8</span>)</span>
<span id="cb8-18"><a href="#cb8-18"></a>figs, axs <span class="op">=</span> plt.subplots(<span class="dv">2</span>,<span class="dv">1</span>)</span>
<span id="cb8-19"><a href="#cb8-19"></a></span>
<span id="cb8-20"><a href="#cb8-20"></a>R_values <span class="op">=</span> logspace(log(<span class="dv">1</span>), log10(<span class="fl">10e6</span>), <span class="dv">1000</span>)</span>
<span id="cb8-21"><a href="#cb8-21"></a><span class="co">#R_values = linspace(1000, 1e6, 100)</span></span>
<span id="cb8-22"><a href="#cb8-22"></a><span class="cf">for</span> ci <span class="kw">in</span> linspace(<span class="dv">0</span>, <span class="dv">20</span>, <span class="dv">5</span>): <span class="co"># Check the effect of varying C_input</span></span>
<span id="cb8-23"><a href="#cb8-23"></a>  voltage_variance <span class="op">=</span> array([<span class="dv">4</span> <span class="op">*</span> k <span class="op">*</span> T <span class="op">*</span> R <span class="op">*</span> <span class="bu">sum</span>( <span class="bu">abs</span>(g)<span class="op">**</span><span class="dv">2</span> <span class="op">/</span> (<span class="dv">1</span> <span class="op">+</span> (<span class="dv">2</span><span class="op">*</span>pi<span class="op">*</span>f<span class="op">*</span>R<span class="op">*</span>ci<span class="op">*</span><span class="fl">1e-12</span>)<span class="op">**</span><span class="dv">2</span>) <span class="op">*</span> df) <span class="cf">for</span> R <span class="kw">in</span> R_values])</span>
<span id="cb8-24"><a href="#cb8-24"></a>  axs[<span class="dv">0</span>].plot(R_values<span class="op">/</span><span class="fl">1e3</span>, voltage_variance<span class="op">/</span><span class="fl">1e-3</span>, label<span class="op">=</span><span class="st">&quot;$C_</span><span class="sc">{input}</span><span class="st">=</span><span class="sc">%d</span><span class="st">$ pF&quot;</span> <span class="op">%</span> ci)</span>
<span id="cb8-25"><a href="#cb8-25"></a>  axs[<span class="dv">1</span>].plot(R_values<span class="op">/</span><span class="fl">1e6</span>, voltage_variance<span class="op">/</span><span class="fl">1e-3</span>, label<span class="op">=</span><span class="st">&quot;$C_</span><span class="sc">{input}</span><span class="st">=</span><span class="sc">%d</span><span class="st">$ pF&quot;</span> <span class="op">%</span> ci)</span>
<span id="cb8-26"><a href="#cb8-26"></a></span>
<span id="cb8-27"><a href="#cb8-27"></a>axs[<span class="dv">0</span>].set_title(<span class="vs">r&quot;$T=</span><span class="sc">%d</span><span class="vs">$ K&quot;</span> <span class="op">%</span> T)</span>
<span id="cb8-28"><a href="#cb8-28"></a>axs[<span class="dv">0</span>].set_xlim(<span class="dv">0</span>, <span class="fl">1e3</span>)</span>
<span id="cb8-29"><a href="#cb8-29"></a>axs[<span class="dv">0</span>].set_xlabel(<span class="st">&#39;Resistor value (k$</span><span class="ch">\\</span><span class="st">Omega$)&#39;</span>)</span>
<span id="cb8-30"><a href="#cb8-30"></a>axs[<span class="dv">0</span>].legend(loc<span class="op">=</span><span class="dv">0</span>)</span>
<span id="cb8-31"><a href="#cb8-31"></a>axs[<span class="dv">1</span>].set_xlim(<span class="dv">0</span>, <span class="dv">10</span>)</span>
<span id="cb8-32"><a href="#cb8-32"></a>axs[<span class="dv">1</span>].set_xlabel(<span class="st">&#39;Resistor value (M$</span><span class="ch">\\</span><span class="st">Omega$)&#39;</span>)</span>
<span id="cb8-33"><a href="#cb8-33"></a><span class="cf">for</span> ax <span class="kw">in</span> axs:</span>
<span id="cb8-34"><a href="#cb8-34"></a>  ax.set_ylim(<span class="dv">0</span>, <span class="dv">70</span>)</span>
<span id="cb8-35"><a href="#cb8-35"></a>  ax.set_ylabel(<span class="vs">r&#39;$\left&lt;v^2\right&gt;$ (mV$^2$)&#39;</span>)</span>
<span id="cb8-36"><a href="#cb8-36"></a>  ax.grid()</span>
<span id="cb8-37"><a href="#cb8-37"></a>savefig(<span class="st">&quot;assets/johnson_noise_expected_voltage_var.png&quot;</span>)</span>
<span id="cb8-38"><a href="#cb8-38"></a>plt.rcParams[<span class="st">&quot;figure.figsize&quot;</span>] <span class="op">=</span> (<span class="dv">5</span>,<span class="dv">4</span>)</span>
<span id="cb8-39"><a href="#cb8-39"></a><span class="co"># %%</span></span></code></pre></div>
<p><img class="img-responsive" src="assets/johnson_noise_expected_voltage_var.png" /></p>
<p>Another relevant consideration is that the signal should be normally distributed around the zero mean. If the measured voltage values have a variance of 10 mV<span class="math inline">\(^2\)</span> (<span class="math inline">\(R\approx 40\)</span> k<span class="math inline">\(\Omega\)</span>, <span class="math inline">\(C_{input}&lt;10\)</span> pF), the measured voltage values should have a distribution according to the plot below. Notice that this signal should be detectable in any oscilloscope with 5 mV/div sensitivity scale. At the 5 mV scale an 8 bit oscilloscope should have a voltage resolution of about 0.1-0.2 mV. The signal variance should be observable even if the bandwidth is reduced by a factor of 10, since <span class="math inline">\(\left&lt;v^2\right&gt;\)</span> is proportional to the bandwidth. Assuming the validity of the above parameters, it should be possible to measure the Johnson noise from resistors having just a few k<span class="math inline">\(\Omega\)</span>. One could try to measure this with an Arduino, and here follows some comments. The 8-bit Arduinos (Uno, Nano, Mega) have 10 bit ADCs that may achieve a 1 mV resolution. While this may seem reasonable, the detection bandwidth is significantly reduced with respect to an oscilloscope. The sampling time in 8-bit arduinos may reach 4/16 MHz, or the equivalent sampling bandwidth is <span class="math inline">\(16/(2\cdot 4)=2\)</span> MHz. But this reduces the resolution to 8-bits, or <span class="math inline">\(1.1/256=4\)</span> mV. To reach the full 10-bit resolution the ADC sampling time (1/ADC clock frequency) must be smaller than 200 kHz, which gives a maximum bandwidth (Nyquist) of 200 kHz/2 = 100 kHz. This means that to measure the Johnson signal with an 8-bit Arduino it should be necessary to amplify the signal even further: a factor of 10 to compensate the coarser voltage resolution and another factor of 2 to compensate for the reduced bandwidth. The 32-bit Arduino Due has a 12-bit resolution ADC with a maximum voltage of 3.3V, or <span class="math inline">\(3.3/2^12=0.8\)</span> mV resolution, and it’s able to sample signals at 1/1 MHz, which gives a theoretical 500 kHz bandwidth. Therefore, it should be easier to measure the Johnson noise with an Arduino Due, but some additional amplification stage with a gain around 8-10 would be helpful to make the signal clearer.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1"></a><span class="co"># %%</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>sigma <span class="op">=</span> sqrt(<span class="fl">10.0</span>)</span>
<span id="cb9-3"><a href="#cb9-3"></a>v <span class="op">=</span> linspace(<span class="op">-</span><span class="dv">10</span>,<span class="dv">10</span>,<span class="dv">100</span>)</span>
<span id="cb9-4"><a href="#cb9-4"></a>prob_dens <span class="op">=</span> exp(<span class="op">-</span><span class="fl">0.5</span><span class="op">*</span>(v<span class="op">/</span>sigma)<span class="op">**</span><span class="dv">2</span>) <span class="op">/</span> (sqrt(<span class="dv">2</span><span class="op">*</span>pi<span class="op">*</span>sigma<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb9-5"><a href="#cb9-5"></a>plot(v, prob_dens)</span>
<span id="cb9-6"><a href="#cb9-6"></a></span>
<span id="cb9-7"><a href="#cb9-7"></a><span class="co"># Assuming a 0.15 mV resolution to see how many points will be seen in the oscilloscope</span></span>
<span id="cb9-8"><a href="#cb9-8"></a>oscilloscope_resolution <span class="op">=</span> <span class="fl">0.2</span> <span class="co"># mV</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>v <span class="op">=</span> linspace(v.<span class="bu">min</span>(),v.<span class="bu">max</span>(),<span class="bu">round</span>((v.<span class="bu">max</span>()<span class="op">-</span>v.<span class="bu">min</span>())<span class="op">/</span>oscilloscope_resolution))</span>
<span id="cb9-10"><a href="#cb9-10"></a>prob_dens <span class="op">=</span> exp(<span class="op">-</span><span class="fl">0.5</span><span class="op">*</span>(v<span class="op">/</span>sigma)<span class="op">**</span><span class="dv">2</span>) <span class="op">/</span> (sqrt(<span class="dv">2</span><span class="op">*</span>pi<span class="op">*</span>sigma<span class="op">**</span><span class="dv">2</span>))</span>
<span id="cb9-11"><a href="#cb9-11"></a>plot(v, prob_dens, <span class="st">&#39;k.&#39;</span>)</span>
<span id="cb9-12"><a href="#cb9-12"></a>grid()</span>
<span id="cb9-13"><a href="#cb9-13"></a>title(<span class="st">&#39;$</span><span class="ch">\\</span><span class="st">sigma^2=</span><span class="sc">%.2f</span><span class="st">$ mV$^2$&#39;</span> <span class="op">%</span> sigma<span class="op">**</span><span class="dv">2</span>)</span>
<span id="cb9-14"><a href="#cb9-14"></a>ylabel(<span class="st">&#39;Probability density&#39;</span>)</span>
<span id="cb9-15"><a href="#cb9-15"></a>xlabel(<span class="st">&#39;Voltage (mV)&#39;</span>)</span>
<span id="cb9-16"><a href="#cb9-16"></a>savefig(<span class="st">&quot;assets/johnson_noise_probab_distribution.png&quot;</span>)</span>
<span id="cb9-17"><a href="#cb9-17"></a><span class="co"># %%</span></span></code></pre></div>
<p><img class="img-responsive" src="assets/johnson_noise_probab_distribution.png" /></p>
<!---
NOTE: Some reports add a high-pass filter in the last stage. The EJP has a pass band of 1-11 kHz, while the MIT paper has a bandpass between 1-50 kHz. Is this a requirement due to some common noises in the lab or because everyone does like that?

NOTE: Another possible interesting circuit could be to use a resistance multiplier circuit (as https://electronics.stackexchange.com/questions/383961/resistance-multiplier) to increase the effective Johnson noise.

NOTE: A nice alternative to the TL074 would be the OPA365 (https://www.ti.com/lit/ds/symlink/opa365.pdf). It has a unity gain bandwidth of 50 MHz, 4.5 nV/sqrt(Hz) of input noise at 100 kHz, low offset (100 uV), low bias current (0.2 pA) and is RRIO. Importante! Também é relativamente barato!! Neste caso daria para usar uma única bateria. Ele vem em versão dual (OPA2365) e cada opamp custa em torno de 1 US$ (seja single ou dual). Seria factível um ganho de 100 em cada estágio.
--->
<h1 id="first-attempt">First attempt</h1>
<p>Since we would like to make the present experiment dirt-cheap, a first attempt will be to use the TL074 quad op amp to provide the necessary gain. We will follow an approach similar to the one discussed in Eur. J. Phys. 31 (2010) 675–679. However, a problem of the TL074 op amps respective to the usage of the LT1024 as in the paper is that the TL074 has a large input offset voltage of 9 mV (worst case), while the LT1024 has just 100 <span class="math inline">\(\mu\)</span>V of offset voltage. The amplification of TL074 offset by a total gain of <span class="math inline">\(10^4\)</span> becomes an unacceptably large error of 90 V. What if we change the gain in each stage such that we do not amplify the offset? That could be performed on a non-inverter amplifier which has a resistor in series with a capacitor in the feedback loop. Each gain stage becomes a buffer at DC while applies a gain of 10 at large frequencies.</p>
<!--- NOTA: Talvez seria mais interessante uma sequência de estágios de amplificação tipo inversor com acoplamento AC após o primeiro buffer... Em particular se for considerado que o erro e ruído na corrente são menores que na tensão para o TL074... Testar das duas formas --->
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>Nyquist, H. (1928). “Thermal Agitation of Electric Charge in Conductors”. <a href="https://doi.org/10.1103/physrev.32.110">Physical Review. 32 (110): 110–113</a>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2" role="doc-endnote"><p>For example, a current in a conductor is induced by an electric field, while the flow of charges induces a magnetic field.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

            </div>

            <div class="col-lg-4">
              <!--- Google search (!?) --->
              <script>
                (function() {
                  var cx = '000186217323396905804:ehdmthbtyy0';
                  var gcse = document.createElement('script');
                  gcse.type = 'text/javascript';
                  gcse.async = true;
                  gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
                  var s = document.getElementsByTagName('script')[0];
                  s.parentNode.insertBefore(gcse, s);
                })();
              </script>
              <gcse:search></gcse:search>
            </div>
        </div>

    </div>
    <!-- /.container -->


    <div class="container">

        <hr>

        <footer>
            <div class="row">
                <div class="col-lg-12">
                    Copyright © 2016-2021 Anderson M. Amaral - Modern Business template by <a href="http://startbootstrap.com">startbootstrap.com</a> - Powered by <a href='http://jinja.pocoo.org/'>Jinja 2</a>
                </div>
            </div>
        </footer>

    </div>
    <!-- /.container -->

    <!-- JavaScript -->
    <script src="/js/jquery-1.10.2.js"></script>
    <script src="/js/bootstrap.js"></script>
    <script src="/js/modern-business.js"></script>
 <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script> 

    <!-- Google Analytics -->
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
        m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

        ga('create', 'UA-77641001-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- /.ga -->
    <!-- /.js -->
</body>

</html>